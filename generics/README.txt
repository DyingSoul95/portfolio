В проекте "middleearth" я реализовал симулято сражения армий "Последняя битва Средеземья"
Задача реализовать симулятор сражения армий Мордора и Средиземья в соответствии со следующими правилами сражения.

1.В сражении участвуют только 2 армии.
2.В каждой армии есть пехота и кавалерия.
3.До начала сражения армии должны быть сформированы в соответствии с установленными правилами:
   а.размер армий выбирается произвольным образом, но численность армий не должна отличаться друг от друга более чем на 20%;
   b.заполнение армий юнитами должно осуществляться произвольным образом (с помощью генератора псевдослучайных значений);
   c.при заполнении армии Средиземья необходимо произвольным образом определять наличие в ней волшебника: волшебник либо есть, и он один, либо его нет;
4.Сражение состоит из трех последовательных фаз:      
   а.первая фаза – сражение кавалерий;
   b.вторая фаза – сражение пехоты;
   c.третья фаза – сражение всех выживших после первых двух фаз.
5.Фаза сражения считается завершенной, если хотя бы в одной из армий не осталось ни одного живого воина.
6.Каждая фаза сражений состоит из последовательности дуэлей юнитов из разных армий.
7.Каждая дуэль в первых двух фазах сражения происходит по следующим правилам:
   а.участники дуэли отбираются произвольным образом из перечня выживших юнитов в каждой армии (с учетом типов юнитов);
   b.произвольным образом определяется, кто из выбранной пары юнитов наносит первый удар;
   c.первый юнит наносит удар;
   d.если второй юнит не выжил после удара, дуэль завершается;
   e.если второй юнит выжил после удара, он наносит ответный удар, и дуэль на этом завершается независимо от того, выжил ли первый юнит.
8.Третья фаза сражения происходит, только если после первых двух фаз в каждой армии (Мордора и Средиземья) остались выжившие юниты.
9.Третья фаза сражения отличается от первых двух следующими правилами:
   a.при выборе участников дуэли не учитывается тип воинов, т. е. кавалерия может сражаться с пехотой;
   b.кавалерия имеет преимущество первого удара перед пехотой (т. е. в дуэли, в которой участвует кавалерист и пехотинец, первый удар всегда наносит кавалерист).
10.После завершения сражения определяется армия, одержавшая победу в сражении.